#!/bin/bash

# Clean up any stale X locks
unset SESSION_MANAGER
unset DBUS_SESSION_BUS_ADDRESS

# Set display
export DISPLAY=:1

# Start D-Bus session bus
eval $(dbus-launch --sh-syntax)

# Disable XFCE compositor (critical for VNC performance)
xfconf-query -c xfwm4 -p /general/use_compositing -s false 2>/dev/null || true

# Start XFCE4 session
exec startxfce4
